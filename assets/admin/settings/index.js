(()=>{var e={485:(e,t)=>{var a;!function(){"use strict";var n={}.hasOwnProperty;function c(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)){if(a.length){var s=c.apply(null,a);s&&e.push(s)}}else if("object"===o){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var r in a)n.call(a,r)&&a[r]&&e.push(r)}}}return e.join(" ")}e.exports?(c.default=c,e.exports=c):void 0===(a=function(){return c}.apply(t,[]))||(e.exports=a)}()}},t={};function a(n){var c=t[n];if(void 0!==c)return c.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.data,c=e=>(e=Object.assign({showCloseButton:!0},e),window.Swal.fire(e)),o=t=>{const{formData:a,setFormData:n}=t,{accounts:o,activeAccount:s}=EDBIData;return console.log(o),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"edbi-accounts"},(0,e.createElement)("div",{className:"edbi-accounts__list"},Object.keys(o).map(((t,s)=>{const r=o[t];return(0,e.createElement)("div",{key:s,className:"edbi-accounts__item"},(0,e.createElement)("div",{key:s,className:"edbi-accounts__item__avatar"},(0,e.createElement)("img",{src:r.photo,alt:r.name})),(0,e.createElement)("div",{className:"edbi-accounts__item__info"},(0,e.createElement)("h3",null,r.name),(0,e.createElement)("p",null,r.email)),(0,e.createElement)("div",{className:"edbi-accounts__item__actions"},(0,e.createElement)("button",{onClick:()=>{(e=>{c({title:"Remove Account",text:"Are you sure you want to remove this account?",icon:"warning",showCancelButton:!0,confirmButtonText:"Remove",confirmButtonColor:"#d33",cancelButtonText:"No",reverseButtons:!0}).then((t=>{t.isConfirmed&&wp.ajax.post("idbwp_remove_account",{account_id:e,nonce:EDBIData?.ajaxNonce}).then((t=>{delete o[e],n({...a,accounts:o}),c({title:"Account Removed",text:"Account has been removed successfully",icon:"success",showCancelButton:!1,confirmButtonText:"Ok"})})).catch((e=>{console.error(e),c({title:"Error",text:"An error occurred while removing account",icon:"error",showCancelButton:!1,confirmButtonText:"Ok"})}))}))})(t)}},"Remove")))}))),(0,e.createElement)("button",{className:"edbi-accounts__add",onClick:()=>{window.open(EDBIData.authUrl,"_blank","width=600,height=600,toolbar=yes,scrollbars=yes,resizable=yes")}},"Add Account")))},s=t=>{const{formData:a,setFormData:n}=t,{accounts:c}=EDBIData;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"edbi-page__content__accounts"},(0,e.createElement)("button",{onClick:e=>{const{name:t,value:c}=e.target;n({...a,appearance:{setting1:"value1"}})}},"Add Account")))},r=t=>{const{activeItem:a,formData:n,setFormData:c}=t,{activeAccount:r}=EDBIData;return(0,e.createElement)("div",null,"accounts"===a&&(0,e.createElement)(o,{formData:n,setFormData:c}),"appearance"===a&&(0,e.createElement)(s,{formData:n,setFormData:c}))},i=window.wp.i18n,l=t=>{const{activeAccount:a,accounts:n,version:c}=EDBIData,{formData:o,setFormData:s}=t;return console.log("header formdaa",o),(0,e.createElement)("div",{className:"edbi-page__header"},(0,e.createElement)("div",{className:"flex items-center edbi-page__header__left"},(0,e.createElement)("i",{className:"dashicons dashicons-admin-generic"}),(0,e.createElement)("h2",null,(0,i.__)("Settings","integrate-dropbox-wp"),(0,e.createElement)("span",null,"v",c))),(0,e.createElement)("div",{className:"edbi-page__header__right"},(0,e.createElement)("button",{className:"px-5 py-3 text-sm text-white rounded-md bg-secondary",onClick:()=>{console.log("saveSettings",o)}},(0,e.createElement)("i",{className:"dashicons dashicons-saved"})," ","Save Changes")))};var m=a(485),u=a.n(m);const d=t=>{const{activeItem:a,setActiveItem:n}=t,{activeAccount:c}=EDBIData,o=[{slug:"accounts",label:(0,i.__)("Accounts","integrate-dropbox-wp"),icon:"dashicons-admin-users"}];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"edbi-page__l"},(0,e.createElement)("div",{className:"edbi-page__sidebar"},(0,e.createElement)("div",{className:"edbi-page__sidebar__content"},(0,e.createElement)("div",{className:"edbi-page__sidebar__items"},o.map(((t,c)=>(0,e.createElement)("div",{key:c,className:u()("edbi-page__sidebar__item",{"edbi-page__sidebar__item--active":a===t.slug}),onClick:()=>{n(t.slug),window.history.pushState("","","#"+t.slug)}},(0,e.createElement)("span",{className:`dashicons ${t.icon}`}),(0,e.createElement)("span",null,t.label)))))))))},_={settings:{accounts:[],accountsLoaded:!1}},v=(0,n.createReduxStore)("edbi-settings",{reducer:(e=_,t)=>"SET_DATA"===t.type?{...e,settings:{...e.settings,[t.item]:t.value}}:e,actions:{setSetting:(e,t)=>({type:"SET_DATA",item:e,value:t})},selectors:{getSetting(e,t){const{settings:a}=e;return a[t]},getSettings:e=>e.settings}});(0,n.register)(v),(0,t.render)((0,e.createElement)((()=>{const a=window.location.hash.replace("#",""),[n,c]=(0,t.useState)(a||"accounts"),[o,s]=(0,t.useState)({});return(0,e.createElement)("div",{className:"edbi-page"},(0,e.createElement)(l,{formData:o,setFormData:s}),(0,e.createElement)("div",{className:"edbi-page__body"},(0,e.createElement)(d,{activeItem:n,setActiveItem:c}),(0,e.createElement)("div",{className:"edbi-page__content"},(0,e.createElement)(r,{activeItem:n,formData:o,setFormData:s}))))}),null),document.getElementById("edbi-settings"))})()})();